\documentclass{standalone} 
\usepackage{pgfplots, pgfplotstable}
\usepgfplotslibrary{fillbetween}
\newcommand{\expnumber}[2]{{#1}\mathrm{e}{#2}}

\usetikzlibrary{matrix}

\pgfplotstableread[col sep = comma]{./data/ciREMPS_chain_eps-0.0001.csv}\chainepsminusfour
\pgfplotstableread[col sep = comma]{./data/ciREMPS_chain_eps-0.01.csv}\chainepsminustwo
\pgfplotstableread[col sep = comma]{./data/ciREMPS_chain_eps-10.csv}\chainepsten
\pgfplotstableread[col sep = comma]{./data/ciREMPS_chain_eps-0.1.csv}\chainepsminusone

\pgfplotstableread[col sep = comma]{./data/gpomdp/gpomdp.csv}\gpomdp


\pgfplotsset{
    scale only axis,
    tick align = outside,
    yticklabel style={/pgf/number format/fixed}  
}

\begin{document}
\begin{tikzpicture}
\begin{axis}[
      legend pos=outer north east,
      legend style={font=\tiny},
      axis lines=middle,
      ylabel near ticks,
      xlabel near ticks,      
      xlabel={Iteration},
      ylabel={Average Reward},
      xmin=0, xmax=20,
      ymin=0, ymax=12,
      yticklabel style={
        /pgf/number format/fixed,
        /pgf/number format/precision=5
	},
	%scaled y ticks=base 10:-3
    ]
    
    %%%%%%%%%%%%% 1e-4 %%%%%%%%%%%%%%%%%%
    \addplot[color=red, no markers, smooth] 
    table[x = Iterations,
    y expr = {\thisrow{Ret_mean}/500}]{\chainepsminusfour};
     \addlegendentry{$\epsilon \; \expnumber{1}{-4}$}
     
    % std 
    \addplot[name path=top, color=red!30, no markers, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_low}/500}]{\chainepsminusfour};

    
    % std
    \addplot[name path=bot, color=red!30, no markers, smooth, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_sup}/500}]{\chainepsminusfour};
    
    % fill
    \addplot[red!10, forget plot] fill between[of=top and bot];
    
     %%%%%%%%%%%%% 1e-2 %%%%%%%%%%%%%%%%%%
    \addplot[color=blue, no markers, smooth]
    table[x= Iterations,
          y expr= {\thisrow{Ret_mean}/500}]{\chainepsminustwo};
     \addlegendentry{$\epsilon \; \expnumber{1}{-2}$}
     
     % std 
    \addplot[name path=top2, color=blue!30, no markers, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_sup}/500}]{\chainepsminustwo};

    
    % std
    \addplot[name path=bot2, color=blue!30, no markers, smooth, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_low}/500}]{\chainepsminustwo};
    
    % fill
    \addplot[blue!10, forget plot] fill between[of=top2 and bot2];
    
     %%%%%%%%%%%%% 10 %%%%%%%%%%%%%%%%%%
    \addplot[color=orange, no markers, smooth]
    table[x= Iterations,
          y expr= {\thisrow{Ret_mean}/500}]{\chainepsten};
     \addlegendentry{$\epsilon \; 10$}
     
     % std 
    \addplot[name path=top3, color=orange!30, no markers, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_sup}/500}]{\chainepsten};

    
    % std
    \addplot[name path=bot3, color=orange!30, no markers, smooth, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_low}/500}]{\chainepsten};
    
    % fill
    \addplot[blue!10, forget plot] fill between[of=top3 and bot3];
    
        %%%%%%%%%%%%% 1e-1 %%%%%%%%%%%%%%%%%%
    \addplot[color=black, no markers, smooth]
    table[x= Iterations,
          y expr= {\thisrow{Ret_mean}/500}]{\chainepsminusone};
     \addlegendentry{$\epsilon \; 0.1$}
     
     % std 
    \addplot[name path=top3, color=black!30, no markers, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_low}/500}]{\chainepsminusone};

    
    % std
    \addplot[name path=bot3, color=black!30, no markers, smooth, forget plot]
    table[x=Iterations,
    y expr= {\thisrow{Rets_sup}/500}]{\chainepsminusone};
    
    % fill
    \addplot[black!10, forget plot] fill between[of=top3 and bot3];

%%%%%%%%%%%%% GPOMDP %%%%%%%%%%%%%%%%%%
    \addplot[color=violet, no markers, smooth]
    table[x = Iterations,
          y expr= {\thisrow{Ret_mean}/500}]{\gpomdp};
     \addlegendentry{GPOMDP}
     
     % std 
    \addplot[name path=top4, color=violet!30, no markers, forget plot]
    table[x = Iterations,
    y expr= {\thisrow{Rets_low}/500}]{\gpomdp};

    
    % std
    \addplot[name path=bot4, color=violet!30, no markers, smooth, forget plot]
    table[x = Iterations,
    y expr= {\thisrow{Rets_sup}/500}]{\gpomdp};
    
    % fill
    \addplot[violet!10, forget plot] fill between[of=top4 and bot4];
    
    
     \draw [very thick,dotted] (axis cs: 0,10) -- (axis cs: 20,10);
    % absolute in pgfplots coordinates
    \node[] at (axis cs: 3,11) {\small $J(\pi^*,P^*)$};


\end{axis}	
\end{tikzpicture}
\end{document}